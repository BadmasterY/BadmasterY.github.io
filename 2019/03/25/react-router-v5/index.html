<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content>
  <meta name="author" content="Badmaster">
  <!-- Open Graph Data -->
  <meta property="og:title" content="React Router v5发布，更好地支持React 16">
  <meta property="og:description" content="Badmaster/blog/博客/个人博客">
  <meta property="og:site_name" content="坏时光">
  <meta property="og:type" content="article">
  <meta property="og:image" content="http://yoursite.com">
  
    <link rel="alternate" href="/atom.xml" title="坏时光" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>坏时光</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/timg.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">React Router v5发布，更好地支持React 16</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  首页
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  归档
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/BadmasterY">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:854007673@qq.com">
                  
                  Email
                  
                </a>
              </li>
            
              <li>
                <a href="/me">
                  
                  关于
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Badmaster</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-03-25</span>
            <span class="time">23:09:16</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/瞎鼓捣/">瞎鼓捣</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/转载/">#转载</a> <a class="tag" href="/tags/React/">#React</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <blockquote><p>转自：开源中国</p>
</blockquote>
<a id="more"></a>
<p>时隔 2 年，React 的声明式路由组件 React Router 发布了第 5 个版本。</p>
<p>此版本侧重于稳定性和兼容性，带来了一系列改进与新特性，并且完全向后兼容 4.x。功能和改进很明显，但是没有破坏性变化，所以如果已经在使用 4.x 版本，则可以在不改变代码的情况下直接使用 v5 版本。</p>
<blockquote><p>关于 React Router v5 有一个小插曲，其实开发团队原本只是计划发布 React Router 4.4 版本，但由于错误地使用了托字符 (^) —— 将依赖错误地写成 “react-router”: “^4.3.1”，导致报错。最后团队决定撤销 4.4 版本，直接改为发布 React Router v5。</p>
<p><img src="/img/react-v5-error.jpg" alt="react" title="React有趣的小漏洞"></p>
<p>react-router-dom 对 react-router 的版本依赖被写为 ^4.3.1，因此当 react-router 更新为 4.4 时用户依然可能会引用 4.3.x 的版本，而它们并不兼容。所以 react-router 开发组决定直接升级主版本为 5，以覆盖 ^ 的效果。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ npm install react-router</span><br><span class="line"># or</span><br><span class="line">$ npm install react-router-dom</span><br><span class="line"># or</span><br><span class="line">$ npm install react-router-native</span><br></pre></td></tr></table></figure>
<p>v5 中最重要的改进是对 &gt;= 15 版本的 React 完全兼容，并对 React 16 提供了更好的支持。</p>
<p>升级了 React 的 context API；消除了所有 <strictmode> 警告；对捆绑基础架构进行了彻底检查，并对发布的所有绑定包进行了全面测试。</strictmode></p>
<p>还为生产引入了预优化的 build，可以不用在构建脚本中手动将 process.env.NODE_ENV 设置为“生产”，更重要的是不会将路由器构建为 build 的一部分，团队已经在开发和生产模式中处理了这个问题。</p>
<p>导入方式也因此需要改变：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/*Instead of*/</span><br><span class="line">import Router from &apos;react-router/Router&apos;;</span><br><span class="line">import Switch from &apos;react-router/Switch&apos;;</span><br><span class="line"></span><br><span class="line">/*do*/</span><br><span class="line">import &#123; Router, Switch &#125; from &apos;react-router&apos;;</span><br></pre></td></tr></table></figure></p>
<p>目前仍然支持前一种风格，但会发出警告。</p>
<p>此外，v5 简化并自动化了发布过程，从现在开始能够更频繁、更可预测地发布。</p>
<p>新特性方面，此版本的一个主要新功能是能够在 <route path> 中使用数组，简化了操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*Instead of this*/</span><br><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Route path=&quot;/users/:id&quot; component=&#123;User&#125; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/profile/:id&quot; component=&#123;User&#125; /&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br><span class="line"></span><br><span class="line">/*you can now do this*/</span><br><span class="line">&lt;Route path=&#123;[&quot;/users/:id&quot;, &quot;/profile/:id&quot;]&#125; component=&#123;User&#125; /&gt;</span><br></pre></td></tr></table></figure></route></p>
<p>还带来了一些 bug 修复，包括支持 <link innerref> 中的 React.createRef，并支持在 <route component> 中使用 React.forwardRef。</route></p>
<p>详情查看发布公告<br><a href="https://reacttraining.com/blog/react-router-v5/" target="_blank" rel="noopener">https://reacttraining.com/blog/react-router-v5/</a></p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Personal blog by <a target="_blank" href="https://github.com/BadmasterY">Badmaster</a>
        </p><p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

